---
import FloatingStats from '../components/FloatingStats.astro';
import PrimaryButton from './PrimaryButton.astro';

import { Image } from 'astro:assets';

import adoteImg from '../assets/images/features/Headshot_20240919_William Adote_Richard Waine_Lancaster_PA_0023 (horizontal) - compressed.jpg';
import cottrellImg from '../assets/images/features/Headshot_20220829_Jack Cottrell_Richard_Waine_Lancaster_PA_0318 (horizontal) - compressed.jpg';
import giglioImg from '../assets/images/features/Headshot_20180414_Ken Giglio_Richard_Waine_Lancaster_PA_0060-2 - compressed.jpg';
import chubbImg from '../assets/images/features/Chubb - ContactSheet (square).jpg';


const {

  primaryButtonText = "Learn More",
  secondaryButtonText = "SCHEDULE CONSULTATION",
  businessHeadshotsUrl = "/rates", // Business Headshots
  actingHeadshotsUrl = "/rates", // Acting Headshots
  linkedinHeadshotsUrl = "/rates", // LinkedIn Headshots
  officeHeadshotsUrl = "/rates", // Office Headshots
  secondaryButtonUrl = "https://app.acuityscheduling.com/schedule.php?owner=13511326&appointmentType=11959793",
} = Astro.props;
---



<section class="features-section">
  <div class="features-container">
    <div class="features-scroller">

      <div class="feature-slide">
        <div class="slide-content-wrapper">
          <Image class="slide-image" src={adoteImg} alt="corporate headshots lancaster, lancaster corporate headshots, Richard Waine photography, Lancaster studio headshots, on-location headshots, business headshots, Lancaster business headshots, business headshots Lancaster, commercial photography, commercial headshots, marketing headshots, branding headshots, about us headshots, about us page, Lancaster conference headshots, Lancaster convention headshots, Lancaster expo headshots" width={700} height={560} loading="lazy" />
          <div class="slide-content slide-content1">
            <h2 class="heading">Business Headshots</h2>
            <div class="slide-text">

              <p>
                Corporate Headshots don't have to be boring. They can and should be fun! Contemporary business headshots or business portraits will promote your credibility and earn client trust.
              </p>

              <p>Developing trust is essential. Business headshots ensure that your team images are aligned with brand messaging.

              </p>

              <p>My easy-to-follow system of coaching and direction accentuates and punctuates your perceived level of expertise.

              </p>

              <p>Whether you are looking to motivate and inspire, or project an aura of diplomacy and approachability, a high-quality corporate headshot will set you up for success!

              </p>

            </div>

            <div class="button-wrapper">
              <PrimaryButton text={primaryButtonText} url={businessHeadshotsUrl}  />
            </div>
          </div>

        </div>
      </div>

      <div class="feature-slide">
        <div class="slide-content-wrapper">
         <Image class="slide-image" src={cottrellImg} alt="acting headshots, acting headshots lancaster, lancaster actor headshots, professional acting headshots, professional headshots, actor headshots, headshots for actors, Lancaster studio headshots, performer headshots, theatrical headshots, commercial headshots, Lancaster theater headshots, Lancaster commercial headshots" width={600} height={480} loading="lazy" />
          <div class="slide-content slide-content2">
            <h2 class="heading">Acting Headshots</h2>
            <div class="slide-text">


             <p> Casting directors and agents see tons of actor headshots daily. Powerful and professional headshots help you stand out from other performers.</p>

<p>Acting headshots are used to determine if you have the right attributes and personality for a production.</p>

<p>Over my years as a headshot specialist, I have delivered some of the best actor headshots in Lancaster.</p>

<p>I understand the nuances of the performing arts industry and will work with you to create headshots that capture your essence and align with the specific demands of your craft.</p>


            </div>
            <div class="button-wrapper">
              <PrimaryButton text={primaryButtonText} url={actingHeadshotsUrl}  />
            </div>
          </div>

        </div>
      </div>

      <div class="feature-slide">
        <div class="slide-content-wrapper">
          <Image class="slide-image" src={giglioImg} alt="LinkedIn headshots, LinkedIn profile picture, LinkedIn profile photo, Lancaster social media headshots, professional headshots, professional headshot photographer, Richard Waine photography, studio headshots" width={600} height={480} loading="lazy" />
          <div class="slide-content slide-content3">
            <h2 class="heading">LinkedIn Headshots</h2>
            <div class="slide-text">


             <p>
              LinkedIn is where professionals find value, business relationships, and clients. Using a subpar headshot on your LinkedIn profile is like having no headshot at all.</p>

<p>An incredible LinkedIn headshot demonstrates to your audience that you invest in yourself, that details matter, and that excellence is the guiding principle of how you do business.</p>

<p>Social selling requires a complete and well-rounded social presence. Your audience should receive your business and your team as an authority. Present yourself as the best solution to their problem.

              </p>


            </div>
            <div class="button-wrapper">
              <PrimaryButton text={primaryButtonText} url={linkedinHeadshotsUrl}  />
            </div>
          </div>

        </div>
      </div>

      <div class="feature-slide">
        <div class="slide-content-wrapper">
          <Image class="slide-image" src={chubbImg} alt="Office Headshots, Professional Headshots on Location, Team Headshots" width={600} height={600} loading="lazy" />
          <div class="slide-content slide-content4">
            <h2 class="heading">Office Headshots</h2>
            <div class="slide-text">


             <p>

               Your business is to develop products, serve your clients, improve company performance, and/or care for revenue and expenses.</p>

<p>My business is to care for the marketing needs and the people of your business.</p>

<p>You spend an enormous amount of money on branding, marketing, and communicating company values in order to increase market share and generate revenue.</p>

<p>Presenting your staff as a unified team of professionals goes a long way towards furthering your brand, improving your marketing material, and showing your clients that you care.

              </p>


            </div>
            <div class="button-wrapper">
              <PrimaryButton text={primaryButtonText} url={officeHeadshotsUrl}  />
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</section>




<script>

import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(ScrollTrigger);

// Ensure the code runs after all elements are present and styles are calculated
document.addEventListener("astro:page-load", () => {

    let mm = gsap.matchMedia();
    const DESKTOP_BREAKPOINT = "(min-width: 768px)";
    const REDUCED_MOTION_QUERY = "(prefers-reduced-motion: reduce)";

    // DESKTOP LOGIC (Horizontal Scroll)
    mm.add(DESKTOP_BREAKPOINT, () => {
        
        // Disable animation for reduced motion users
        if (window.matchMedia(REDUCED_MOTION_QUERY).matches) return; 

        const slides = gsap.utils.toArray('.feature-slide');
        const scroller = document.querySelector('.features-scroller');

        // Check for necessary elements
        if (!scroller || slides.length < 2) return;

        // Force a ScrollTrigger refresh before setting up the animation
        ScrollTrigger.refresh();


        // Main horizontal scroll animation controlled by vertical scroll
        const horizontalScroll = gsap.to(slides, {
            xPercent: -100 * (slides.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: ".features-section",
                pin: true,
                scrub: 1,
                refreshPriority: 1, //added 12/13/25
                // Calculate end dynamically based on the number of slides
                end: () => `+=${slides.length * window.innerWidth}`, 
                invalidateOnRefresh: true,
            }
        });

        // Animate content within each slide
        slides.forEach((slide: any) => {
            const heading = slide.querySelector(".heading");
            const text = slide.querySelector(".slide-text");
            const image = slide.querySelector(".slide-image");

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: slide,
                    containerAnimation: horizontalScroll,
                    start: "left center",
                    end: "center center",
                    scrub: true,
                }
            });


    
           if (heading) tl.from(heading, { opacity: 0, ease: "power1.inOut" }, 0);
           if (text) tl.from(text, { opacity: 0, ease: "power2.out" }, 0.2);
           if (image) tl.from(image, { opacity: 0, scale: 0.8, ease: "slow" }, 0);
           
        });


// Cleanup function: Kills ScrollTriggers when screen size shrinks below 768px
        return () => {
            if (horizontalScroll && horizontalScroll.scrollTrigger) {
                horizontalScroll.scrollTrigger.kill(true); // Kill main trigger
            }
            // Instead of killing ALL triggers, we clear props on the elements
            // and trust the mobile logic below to handle the rest.
            // We explicitly AVOID ScrollTrigger.getAll().forEach(trigger => trigger.kill());
            gsap.set('.features-section, .features-scroller, .feature-slide', { clearProps: 'all' });
        };
    });



        // Cleanup function: Kills ScrollTriggers when screen size shrinks below 768px
//        return () => {
 //           horizontalScroll.kill(); 
   //         ScrollTrigger.getAll().forEach(trigger => trigger.kill());
     //       gsap.set('.features-section', { clearProps: 'all' });
       // };
    //});


    // MOBILE FALLBACK LOGIC (Runs ONLY on screens smaller than 768px)
    mm.add("(max-width: 767px)", () => {
        // Clear any pinned/transformed styles left by ScrollTrigger
        gsap.set('.features-section, .features-scroller, .feature-slide', { clearProps: 'all' });
    });
});

</script>





<!-- 

<script>
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';

gsap.registerPlugin(ScrollTrigger);

let mm = gsap.matchMedia();
const DESKTOP_BREAKPOINT = "(min-width: 768px)";
const REDUCED_MOTION_QUERY = "(prefers-reduced-motion: reduce)";

// DESKTOP LOGIC (Horizontal Scroll)
mm.add(DESKTOP_BREAKPOINT, () => {
    
    // Disable animation for reduced motion users
    if (window.matchMedia(REDUCED_MOTION_QUERY).matches) return; 

    const slides = gsap.utils.toArray('.feature-slide');
    const scroller = document.querySelector('.features-scroller');

    if (scroller && slides.length > 1) {
        // Main horizontal scroll animation controlled by vertical scroll
        const horizontalScroll = gsap.to(slides, {
            xPercent: -100 * (slides.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: ".features-section",
                pin: true,
                scrub: 1,
                // snap: 1 / (slides.length - 1),
               // snap: { snapTo: 1 / (slides.length - 1), directional: true, delay: 0.2 },
                end: () => `+=${(slides.length - 1) * window.innerWidth}`,
                invalidateOnRefresh: true,
            }
        });

        // Animate content within each slide
        slides.forEach((slide: any) => {
            const heading = slide.querySelector(".heading");
            const text = slide.querySelector(".slide-text");
            const image = slide.querySelector(".slide-image");

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: slide,
                    containerAnimation: horizontalScroll,
                    start: "left center",
                    end: "center center",
                    scrub: true,
                }
            });


  
           if (heading) tl.from(heading, { opacity: 0, y: 0, ease: "power1.inOut" }, 0);
           if (text) tl.from(text, { opacity: 0, y: 0, ease: "power2.out" }, 0.2);
           if (image) tl.from(image, { opacity: 0, x: 0, y: 0, scale: 0, ease: "slow" }, 0);
           
        });
    }

    // Cleanup function: Kills ScrollTriggers when screen size shrinks below 768px
    return () => {
        ScrollTrigger.getAll().forEach(trigger => trigger.kill());
    };
});


// MOBILE FALLBACK LOGIC (Runs ONLY on screens smaller than 768px)
mm.add("(max-width: 767px)", () => {
    // Clear any pinned/transformed styles left by ScrollTrigger
    gsap.set('.features-section, .features-scroller, .feature-slide', { clearProps: 'all' });
});

window.addEventListener("load", () => {
  ScrollTrigger.refresh();
});

</script>

-->

<style>
.features-section {
  width: 100%;
  overflow: hidden;
  
}

.features-container {
  position: relative;
  width: 100%;
  
}

.features-scroller {
  display: flex;
  flex-wrap: wrap; /* MOBILE FIX: Allows slides to stack vertically */
  width: 100%; 
}

.feature-slide {
  width: 100%; /* FIX: Prevents 100vw overflow on mobile */
  height: auto; /* Allows slides to occupy vertical space on mobile */
  flex-shrink: 0;
  display: block;
  padding-block: 4rem; /* Add vertical padding for mobile stacking*/
  background: var(--drkbg);
  color: var(--ltclr);

  
}

.feature-slide:first-child{
  padding-block:0  4rem;
}

.slide-content-wrapper {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0;
  margin-inline: auto;
  place-items: center;
  width: 100%;
  max-inline-size: 100%;
  
}

.slide-image{
padding-inline:var(--size-7);

}
.slide-content{
  margin-top:var(--size-7);
}

/* ==========================================
   TABLET - min-width: 48em (768px)
   ========================================== */
@media (min-width: 48em) {
.slide-image{
padding:0; 

}

.slide-content{
  margin-top:var(--size-3);
}

}


/* ==========================================
   TABLET - min-width: 67.5em (1080px)
   ========================================== */
@media (min-width: 67.5em) {
  .slide-content-wrapper {
    grid-template-columns: 1fr 1fr;
  }
}

p {
  margin-block: var(--size-3);
}

.slide-image {
  display: block;
  margin: auto;
  height: auto;
  box-shadow: var(--shadow);
  width: min(700px, 100%);
}

.slide-content {
  margin-inline: auto;
  max-inline-size:75%;
}

.slide-content h2 {
  text-transform: uppercase;
  font-size: var(--fs-800);
  letter-spacing: 0.05em;
  color: var(--accent);
  font-weight: var(--fw-semi-bold);
  text-align: center;
}

/* DESKTOP OVERRIDE: Restore Horizontal Scroll Behavior (768px+) */
@media (min-width: 48em) {
.slide-content-wrapper{
  
  /* margin-top:var(--header-height); */
}

    .slide-content h2 {
        text-align: start;
    }

    .features-scroller {
        flex-wrap: nowrap; /* Forces slides back into a horizontal row */
        width: fit-content;
    }

    .feature-slide {
        width: 100vw; /* Re-enables 100vw width for horizontal scroll calculation */
        height: 100vh; /* Re-enables full viewport height for pinning */
        display: flex; /* Restore centered content layout */
        padding-block: 0;
    }
}

 .features-section :global(.primary-btn){
  margin-top:var(--size-5);
  padding: var(--size-3) var(--size-8);
  font-size: var(--fs-350);
}
</style>








