---
import { Image } from 'astro:assets';

import AccelerateMortgage from '../assets/images/tearsheet/AccelerateMortgage.png';
import AidemMedia from '../assets/images/tearsheet/AidemMedia.png';
import AlliedFirstBank from '../assets/images/tearsheet/Allied First Bank - black.png';
import Aperture from '../assets/images/tearsheet/Aperture - black.png';
import Avail from '../assets/images/tearsheet/Avail - black.png';
import CapitalOne from '../assets/images/tearsheet/Capital One.png';
import Carel from '../assets/images/tearsheet/Carel.png';
import Chubb from '../assets/images/tearsheet/Chubb.png';
import ColumbiaCottage from '../assets/images/tearsheet/Columbia Cottage - (black).png';
import EPNB from '../assets/images/tearsheet/EPNB.png';
import Havtech from '../assets/images/tearsheet/Havtech.png';
import Inframark from '../assets/images/tearsheet/Inframark.png';
import Isaca from '../assets/images/tearsheet/ISACA.png';
import Janney from '../assets/images/tearsheet/Janney.png';
import KaufmanDolowich from '../assets/images/tearsheet/Kaufman Dolowich (black).png';
import LCNBlack from '../assets/images/tearsheet/LCN Logo (black).png';
import Metso from '../assets/images/tearsheet/Metso Outotec.png';
import NorthWestBlack from '../assets/images/tearsheet/Northwest Bank (black).png';
import RBC from '../assets/images/tearsheet/RBC.png';
import RGInjuryLaw from '../assets/images/tearsheet/RG-injury-law.png';
import SallieMae2 from '../assets/images/tearsheet/Sallie-Mae-2.png';
import TRC from '../assets/images/tearsheet/TRC.png';
import ZentisBlack from '../assets/images/tearsheet/Zentis - (black).png';



interface Logo {
  src: any;
  alt: string;
  scale?: number;
}



const logos: Logo[] = [
  { src: AccelerateMortgage, alt: "Accelerate Mortgage" },
  { src: AidemMedia, alt: "Aidem Media" },
  { src: AlliedFirstBank, alt: "Allied First Bank", scale: 1.35 },
  { src: Aperture, alt: "Aperture LLC" },
  { src: Chubb, alt: "Chubb Insurance" },
  { src: ColumbiaCottage, alt: "Columbia Cottage" },
  { src: EPNB, alt: "Ephrata National Bank", scale: 1.5 },
  { src: Havtech, alt: "Havtech", scale: 1.25 },
  { src: Isaca, alt: "ISACA Harrisburg" },
  { src: Avail, alt: "Avail Technology Solutions", scale: 0.8 },
  { src: TRC, alt: "TRC Companies", scale: 0.9 },
  { src: NorthWestBlack, alt: "Northwest Bank", scale: 1.45 },
  { src: Carel, alt: "Carel USA", scale: 0.8 },
  { src: Janney, alt: "Janney", scale: 1.35 },
  { src: RBC, alt: "RBC Wealth Management" },
  { src: RGInjuryLaw, alt: "RG Injury Law", scale: 1.35 },
  { src: SallieMae2, alt: "Sallie Mae" },
  { src: LCNBlack, alt: "LCN Capital", scale: 0.9 },
  { src: CapitalOne, alt: "Capital One" },
  { src: Inframark, alt: "Inframark", scale: 1.25 },
  { src: Metso, alt: "Metso", scale: 1.25 },
  { src: KaufmanDolowich, alt: "Kaufman Dolowich", scale: 1.6 },
  { src: ZentisBlack, alt: "Zentis North America", scale: 0.8 },
];



---

<div class="tear-sheet-container">
    <h2 class="section-title">TRUSTED BY FORWARD-THINKING COMPANIES AROUND THE WORLD</h2>



    
    <div class="scroller" data-direction="left" data-speed="slow">
        <div class="scroller__inner">
            {logos.map((logo) => (
                <img 
                    src={logo.src.src} 
                    alt={logo.alt} 
                    loading="lazy" 
                    width="200" 
                    height="100"
                    style={logo.scale ? `transform: scale(${logo.scale});` : null}
                />
            ))}
        </div>
    </div>


</div>

<style>



h2{
    text-wrap:pretty;
    
}

    .tear-sheet-container {
        --_gap: var(--size-12, 3rem);
        --_duration: 60s;
        
        display: grid;
        place-items: center;
        width: 95%;
        margin: auto;
        padding-block: var(--size-8);
        color: var(--blkclr);
        overflow: hidden;

        @media (width >= 48em){
            width:80%;
        }
    }
    
    .section-title {
        text-align: center;
        margin-bottom: 4rem;
        font-size: var(--fs-600, 1.5rem);
    }
    
    .scroller {
        max-width: 100%;
        overflow: hidden;
        -webkit-mask: linear-gradient(90deg, transparent, white 5%, white 95%, transparent);
        mask: linear-gradient(90deg, transparent, white 5%, white 95%, transparent);
    }
    
    .scroller__inner {
        width: max-content;
        display: flex;
        flex-wrap: nowrap;
        gap: var(--_gap);
        align-items:center;
        /* Hardware acceleration hacks */
        will-change: transform; 
        transform: translateZ(0); 
    }


    
    .scroller[data-animated="true"] .scroller__inner {
        animation: scroll var(--_duration) linear infinite;
    }
    
    @keyframes scroll {
        to {
            transform: translate3d(calc(-50% - (var(--_gap) / 2)), 0, 0);
        }
    }
    
    .scroller img {
        height: auto;
        max-width: 175px;
        filter: grayscale(1);
        /* Prevent layout shifts on load */
        aspect-ratio: 3/2; 
        object-fit: contain; 
    }
</style>

<script>
function initScroller() {
    const scrollers = document.querySelectorAll<HTMLElement>(".scroller");
    
    if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;

    scrollers.forEach((scroller) => {
        if (scroller.getAttribute("data-animated")) return;
        
        const inner = scroller.querySelector(".scroller__inner");
        if (!inner) return;

        // 1. Batch Clone: Create a fragment to avoid multiple reflows
        const fragment = document.createDocumentFragment();
        const children = Array.from(inner.children);
        
        children.forEach((item) => {
            const clone = item.cloneNode(true) as HTMLElement;
            clone.setAttribute("aria-hidden", "true");
            fragment.appendChild(clone);
        });
        
        // 2. Single Injection
        inner.appendChild(fragment);
        scroller.setAttribute("data-animated", "true");
        
        // 3. Observer (Pause when off-screen)
        new IntersectionObserver((entries) => {
            const entry = entries[0];
            const track = entry.target.querySelector('.scroller__inner') as HTMLElement;
            if (track) track.style.animationPlayState = entry.isIntersecting ? 'running' : 'paused';
        }).observe(scroller);
    });
}

// Astro View Transitions Support
document.addEventListener('astro:page-load', initScroller);
</script>

