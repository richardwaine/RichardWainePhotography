---
// @ts-nocheck
import logoWhite from '../assets/Logo - Richard Waine Photography (transparent) white.png';

export interface Props {
  businessInfo?: {name: string; address: string; phone: string};
  logoSrc?: string;
  logoAlt?: string;
  socialLinks?: Array<{platform: string; url: string; iconClass: string; ariaLabel: string}>;
  areasServiced?: Array<{name: string; url: string}>;
  quickLinks?: Array<{name: string; url: string}>;
  copyrightYear?: number;
}

const { 
  businessInfo = {
    name: 'Richard Waine Photography',
    address: '20 North Queen Street, Lancaster, PA 17603',
    phone: '(717) 925-0061'
  },
  logoSrc = logoWhite.src,
  logoAlt = 'Richard Waine Photography Logo',
  socialLinks = [
    { platform: 'facebook', url: 'https://www.facebook.com/RichardWainePhotography', iconClass: 'fa-brands fa-facebook-f', ariaLabel: 'link to Facebook profile' },
    { platform: 'instagram', url: 'https://www.instagram.com/richardwaine', iconClass: 'fa-brands fa-instagram', ariaLabel: 'link to Instagram profile' },
    { platform: 'pinterest', url: 'https://www.pinterest.com/RichardWaine', iconClass: 'fa-brands fa-pinterest-p', ariaLabel: 'link to Pinterest profile' },
    { platform: 'linkedin', url: 'https://www.linkedin.com/in/richardwaine', iconClass: 'fa-brands fa-linkedin-in', ariaLabel: 'link to LinkedIn profile' }
  ],
  areasServiced = [
    { name: 'Lancaster', url: '/' },
    { name: 'Harrisburg', url: '/harrisburg-headshots' },
    { name: 'York', url: '/york-headshots' },
    { name: 'Philadelphia', url: '/philadelphia-headshots' },
    { name: 'Baltimore', url: '/baltimore-headshots' },
    { name: 'Delaware', url: '/delaware-headshots' }
  ],
  quickLinks = [
    { name: 'About', url: '/about-lancaster-headshot-photographer-richard-waine' },
    { name: 'Contact', url: '/contact-lancaster-headshot-photographer-richard-waine' },
    { name: 'Studio', url: '/richard-waine-photography-studio' },
    { name: 'Privacy Policy', url: '/terms-and-conditions' },
    { name: 'Team', url: '/my-team' },
    { name: 'Blog', url: '/blog' },
    { name: 'Resources', url: '/resources' }
  ],
  copyrightYear = new Date().getFullYear()
} = Astro.props;
---

<!-- Footer Access Trapezoid -->
<div class="footer-trigger" id="footerTrigger" tabindex="0" role="button" aria-label="Open footer menu" aria-expanded="false">
    <div class="trapezoid-indicator">
        <span class="trapezoid-text">MENU</span>
    </div>
</div>

<div class="footer-panel" id="footerPanel">
    <div class="footer-content">
        <div class="footer-main-row">
            <div class="footer-logo-section">
                <a href="/" aria-label="Richard Waine Photography Home">
                    <img class="footer-logo" src={logoSrc} alt={logoAlt} width="120" height="120" loading="lazy">
                </a>
            </div>
            
            <div class="footer-section">
                <h4>AREAS SERVICED</h4>
                <ul class="footer-links">
                    {areasServiced.map(area => (
                        <li><a href={area.url}>{area.name}</a></li>
                    ))}
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>QUICK LINKS</h4>
                <ul class="footer-links">
                    {quickLinks.map(link => (
                        <li><a href={link.url}>{link.name}</a></li>
                    ))}
                </ul>
            </div>
        </div>
        
        <hr class="footer-divider">
        
        <div class="footer-bottom-row">
            <div class="footer-contact">
                <a class="telephone" href={`tel:${businessInfo.phone.replace(/\\D/g, '')}`}>{businessInfo.phone}</a>
                <p>{businessInfo.address}</p>
                <p class="copyright-text">Copyright &copy; <a href="/">{businessInfo.name}</a> {copyrightYear} | All Rights Reserved</p>
            </div>
            
            <div class="footer-social">
                <ul class="social-icons">
                    {socialLinks.map(social => (
                        <li>
                            <a href={social.url} aria-label={social.ariaLabel}>
                                <i class={`${social.iconClass}`}></i>
                            </a>
                        </li>
                    ))}
                </ul>
            </div>
        </div>
    </div>
</div>

<style>

    /* Footer Access Trapezoid */
    .footer-trigger {
        --_footer-trigger-width: 225px;
        --_footer-trigger-height: calc(var(--_footer-trigger-width) / 4.5);

        position: fixed;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: var(--_footer-trigger-width);
        height: var(--_footer-trigger-height);
        z-index: 1000;
        cursor: pointer;
        background: transparent;
        filter: drop-shadow(0 0 6px var(--glow-clr-strong));
    }

    .trapezoid-indicator {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: var(--_footer-trigger-height);
        background: linear-gradient(135deg, 
            rgba(0, 0, 0, 1) 0%, 
            rgba(26, 26, 26, 1) 100%);
        backdrop-filter: blur(15px);
        border-top: 1px solid var(--glow-clr-medium);
        clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
        opacity: 1;
        transition: all 0.3s ease;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .trapezoid-text {
        color: var(--accent);
        font-family:var(--ff-primary);
        font-weight: var(--fw-semi-bold);
        font-size: var(--fs-325);
        letter-spacing: 1px;
        text-transform: uppercase;
        position: relative;
        z-index: 10;
    }


    .footer-panel {
        position: fixed;
        bottom: -100%;
        left: 0;
        right: 0;
        height: calc(100vh - var(--header-height));
        overflow-y: auto;
        background: linear-gradient(135deg,
            rgba(15, 15, 15, 0.95) 0%,
            rgba(26, 26, 26, 0.95) 100%);
        backdrop-filter: blur(20px) saturate(180%);
        border-top: 1px solid rgba(3, 169, 244, 0.2);
        z-index: 999;
        transition: all 0.6s cubic-bezier(0.25, 0.8, 0.25, 1);
        box-shadow: 0 0px 10px var(--shadow-clr-deep);
    }



    .footer-panel.open {
        bottom: 0;
    }



    .footer-trigger:focus-visible {
        outline: 2px solid orange;
        outline-offset: 2px;
       
    }

    

    /* Mobile-First Replacement */
    .footer-content {
        width: 100%;
        padding: var(--size-650);
        font-family: var(--ff-primary);
        color: var(--ltclr);
    }

    .footer-main-row {
        display: grid;
        grid-template-columns: 1fr;
        align-items: start;
        gap: var(--size-650);
        margin-bottom: var(--size-4);
        place-items: center;
        text-align: center;
    }

    .footer-logo-section {
        display: flex;
        justify-content: center;
        align-self:center;
    }

    .footer-logo {
        width: 150px;
        height: auto;
    }

    .footer-section h4 {
        color: var(--accent);
        font-size: var(--fs-350) /*0.9rem */;
        font-weight: var(--fw-semi-bold);
        margin-bottom: calc(var(--size-650) / 2); /* 15px */
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .footer-links {
        padding: 0;
        list-style: none;
        margin: 0;
    }

    .footer-links li {
        margin-bottom: var(--size-1);
    }

    .footer-links a {
        color: var(--faded);
        text-decoration: none;
        font-size: var(--fs-350) /*0.9rem */;
        transition: color 0.3s ease;
    }

    .footer-links a:hover {
        color: var(--ltclr);
    }

    .footer-divider {
        border: none;
        border-top: 1px solid rgba(187, 187, 187, 0.5);
        width: 80%;
        margin: var(--size-650) auto;
    }

    .footer-bottom-row {
        display: grid;
        grid-template-columns: 1fr;
        align-items: center;
        gap: var(--size-4);
        place-items: center;
        text-align: center;
    }

    .footer-contact {
        text-align: center;
    }

    .footer-contact .telephone {
        /* color: var(--ltclr); */
        color: var(--faded);
        text-decoration: none;
        font-weight: var(--fw-semi-bold);
        display: block;
        margin-bottom: var(--size-2);
    }

    .footer-contact p {
        color: var(--faded);
        margin: var(--size-1) 0;
        font-size: var(--fs-350) /*0.9rem */;
    }

    .footer-contact .copyright-text {
        margin-top: calc(var(--size-650) / 2); /* 15px */
    }

    .footer-contact .copyright-text a {
        color: var(--faded);
        text-decoration: none;
    }

    .footer-social {
        display: flex;
        justify-content: center;
    }

    .social-icons {
        padding: 0;
        margin: 0;
        list-style: none;
        display: flex;
        gap: var(--size-3);
    }

    .social-icons a {
        width: 44px;
        height: 44px;
        line-height: 44px;
        text-align: center;
        color: var(--ltclr);
        font-size: var(--fs-500);
        transition: color 0.3s ease;
    }

    .social-icons a:hover {
        color: var(--accent);
    }

    @media (min-width: 48em) {
        .footer-content {
            padding: var(--size-7) var(--size-875);
            
        }

        .footer-main-row {
            grid-template-columns: 1fr 1fr 1fr;
            gap: calc(var(--size-650) / 2);
            text-align: left;
            align-items: start;
      
            
        }

        .footer-contact {
            text-align: left;
        }

        .footer-bottom-row {
            grid-template-columns: 1fr 1fr;
            text-align: left;
        }

        .footer-social {
            justify-content: flex-end;
        }

        .footer-panel {
            bottom: -500px;
            height: auto;
            min-height: 500px;
            overflow-y: visible;
        }
    }
</style>

<script>
document.addEventListener('astro:page-load', () => {
    const trigger = document.getElementById('footerTrigger');
    const panel = document.getElementById('footerPanel');

    if (trigger && panel) {
        trigger.addEventListener('click', () => {
            panel.classList.toggle('open');
            const isOpen = panel.classList.contains('open');
            trigger.setAttribute('aria-expanded', isOpen.toString());
        });

        document.addEventListener('click', (e) => {
            if (!trigger.contains(e.target as Node) && !panel.contains(e.target as Node)) {
                panel.classList.remove('open');
                trigger.setAttribute('aria-expanded', 'false');
            }
        });
    }
});
</script>
